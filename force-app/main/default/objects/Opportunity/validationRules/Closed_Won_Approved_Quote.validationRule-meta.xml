<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Closed_Won_Approved_Quote</fullName>
    <active>true</active>
    <description>SFDC-6938 - Oppty can not be closed won unless Primary quote is approved for Cuda only
SFDC-10337 - Now for all business groups</description>
    <errorConditionFormula>AND(
NOT(ISPICKVAL( Type , &apos;De-book Re-book&apos;)),
ISPICKVAL(StageName, &apos;Closed Won&apos;),
NOT(ISPICKVAL(SBQQ__PrimaryQuote__r.ApprovalStatus__c,&quot;Approved&quot;)),
NOT($Permission.BYPASS_ALL_VALIDATIONS_ON_OPPTY)
)</errorConditionFormula>
    <errorMessage>Sorry - You can&apos;t move this Opportunity to &apos;Closed Won&apos; until the Primary Quote is approved.</errorMessage>
</ValidationRule>
