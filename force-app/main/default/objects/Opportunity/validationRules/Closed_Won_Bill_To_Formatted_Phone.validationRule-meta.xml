<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Closed_Won_Bill_To_Formatted_Phone</fullName>
    <active>true</active>
    <description>Check to see if the Account /Reseller /Distributor Bill_To_Phone__c field and Contact Primary /Reseller /Distributor Phone field (21 chars limit) has the correct format numbers &amp; phone symbols (pluses, hyphens, and parentheses)</description>
    <errorConditionFormula>AND( 
 ISPICKVAL(StageName, &apos;Closed Won&apos;), 
 NOT($Permission.BYPASS_ALL_VALIDATIONS_ON_OPPTY),
 OR(
    AND(
       LEN(Account.Bill_To_Phone__c) &gt; 0,
       NOT(REGEX(Account.Bill_To_Phone__c,&quot;[0-9+ ()-]+&quot;))
    ),
    LEN(Account.Bill_To_Phone__c) &gt; 21,
    AND(
       LEN(Distributor__r.Bill_To_Phone__c) &gt; 0,
       NOT(REGEX(Distributor__r.Bill_To_Phone__c,&quot;[0-9+ ()-]+&quot;))
    ),
    LEN(Distributor__r.Bill_To_Phone__c) &gt; 21,
    AND(
       LEN(Reseller__r.Bill_To_Phone__c) &gt; 0,
       NOT(REGEX(Reseller__r.Bill_To_Phone__c,&quot;[0-9+ ()-]+&quot;))
    ),
    LEN(Reseller__r.Bill_To_Phone__c) &gt; 21,
    AND(
       LEN(Primary_Contact__r.Phone) &gt; 0,
       NOT(REGEX(Primary_Contact__r.Phone,&quot;[0-9+ ()-]+&quot;))
    ),
    LEN(Primary_Contact__r.Phone) &gt; 21,
    AND(
       LEN(Distributor_Contact__r.Phone) &gt; 0,
       NOT(REGEX(Distributor_Contact__r.Phone,&quot;[0-9+ ()-]+&quot;))
    ),
    LEN(Distributor_Contact__r.Phone) &gt; 21,
    AND(
       LEN(Reseller_Contact__r.Phone) &gt; 0,
       NOT(REGEX(Reseller_Contact__r.Phone,&quot;[0-9+ ()-]+&quot;))
    ),
    LEN(Reseller_Contact__r.Phone) &gt; 21
  )
)</errorConditionFormula>
    <errorMessage>Check to see if the Account /Reseller /Distributor Bill To Phone field and Contact Primary /Reseller /Distributor Phone field (21 chars limit) has the correct format numbers &amp; phone symbols (pluses, hyphens, and parentheses)</errorMessage>
</ValidationRule>
