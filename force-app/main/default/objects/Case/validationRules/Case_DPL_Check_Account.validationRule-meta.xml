<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Case_DPL_Check_Account</fullName>
    <active>false</active>
    <description>Cannot create cases &quot;technical support&quot; if account / contact is banned</description>
    <errorConditionFormula>RecordType.DeveloperName = &quot;Technical_Support&quot; &amp;&amp; 

OR(
/* ISPICKVAL( Account.Compliance_Status__c ,&apos;Suspect&apos;), 
IF(NOT(ISBLANK(Related_Account__c)), TEXT(Related_Account__r.Compliance_Status__c) == &quot;Suspect&quot;, false),*/
ISPICKVAL( Account.Compliance_Status__c ,&apos;Banned&apos;),
IF(NOT(ISBLANK(Related_Account__c)), TEXT(Related_Account__r.Compliance_Status__c) == &quot;Banned&quot;, false)

)</errorConditionFormula>
    <errorDisplayField>AccountId</errorDisplayField>
    <errorMessage>Sorry - We can&apos;t create the Case because the Contact or Account Status is set to &apos;Banned&apos;.</errorMessage>
</ValidationRule>
