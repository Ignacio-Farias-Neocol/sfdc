<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <decisions>
        <name>Check_DistributorId</name>
        <label>Check DistributorId</label>
        <locationX>175</locationX>
        <locationY>52</locationY>
        <defaultConnector>
            <targetReference>Check_ResellerId</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Distributor_Id_Exists_Is_Not_Account_Id</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DistributorId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>DistributorId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>AccountId</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>DistributorId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Distributor_Type</targetReference>
            </connector>
            <label>Distributor Id Exists &amp; Is Not Account Id</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_MSP_Bill_Agg_Id</name>
        <label>Check MSP Bill Agg Id</label>
        <locationX>806</locationX>
        <locationY>550</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>MSP_Bill_Agg_Id_Exists_Is_Not_Account_Id</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>MSPBillingAggregatorId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>MSPBillingAggregatorId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>AccountId</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>MSPBillingAggregatorId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Related_MSP_Bill_Agg</targetReference>
            </connector>
            <label>MSP Bill Agg Id Exists &amp; Is Not Account Id</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_ResellerId</name>
        <label>Check ReellerId</label>
        <locationX>406</locationX>
        <locationY>210</locationY>
        <defaultConnector>
            <targetReference>Check_MSP_Bill_Agg_Id</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Reseller_Id_Exists_Is_Not_Account_Id</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ResellerId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>ResellerId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>AccountId</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>ResellerId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Related_Partners_0</targetReference>
            </connector>
            <label>Reseller Id Exists &amp; Is Not Account Id</label>
        </rules>
    </decisions>
    <decisions>
        <name>Partner_Distributor_Exists</name>
        <label>Partner Distributor Exists</label>
        <locationX>73</locationX>
        <locationY>525</locationY>
        <defaultConnector>
            <targetReference>Add_Distributor_Partner</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>PartnerDistributor</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AccountType</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Reseller - MSP</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_ResellerId</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
        <rules>
            <name>Yes_MSP</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DistributorId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AccountType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reseller - MSP</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Distributor_MSP_Partner</targetReference>
            </connector>
            <label>Yes - MSP</label>
        </rules>
    </decisions>
    <decisions>
        <name>Partner_MSP_Bill_Agg_Exists</name>
        <label>Partner MSP Bill Agg Exists</label>
        <locationX>936</locationX>
        <locationY>225</locationY>
        <defaultConnector>
            <targetReference>Add_MSP_Bill_Agg</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome - No</defaultConnectorLabel>
        <rules>
            <name>Yes_MSP_Bill_Agg</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>MSPBillAgg</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>MSPBillingAggregatorId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>MSPBillingAggregatorId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Partner_Reseller_Exists</name>
        <label>Partner Reseller Exists</label>
        <locationX>681</locationX>
        <locationY>278</locationY>
        <defaultConnector>
            <targetReference>Add_Reseller_Partner</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome] - No</defaultConnectorLabel>
        <rules>
            <name>Yes_Reseller</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>PartnerReseller</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_MSP_Bill_Agg_Id</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>Called from PB: Opportunity Management - Create/Edit
 used to update partner on opportunity</description>
    <interviewLabel>Partner Role Management {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Partner Role Management</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Add_Distributor_MSP_Partner</name>
        <label>Add Distributor MSP Partner</label>
        <locationX>494</locationX>
        <locationY>527</locationY>
        <assignRecordIdToReference>DistributorPartnerId</assignRecordIdToReference>
        <connector>
            <targetReference>Check_ResellerId</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountToId</field>
            <value>
                <elementReference>DistributorId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>IsPrimary</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OpportunityId</field>
            <value>
                <elementReference>OpportunityId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Role</field>
            <value>
                <stringValue>MSP Billing Aggregator</stringValue>
            </value>
        </inputAssignments>
        <object>Partner</object>
    </recordCreates>
    <recordCreates>
        <name>Add_Distributor_Partner</name>
        <label>Add Distributor Partner</label>
        <locationX>404</locationX>
        <locationY>702</locationY>
        <assignRecordIdToReference>DistributorPartnerId</assignRecordIdToReference>
        <connector>
            <targetReference>Check_ResellerId</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountToId</field>
            <value>
                <elementReference>DistributorId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>IsPrimary</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OpportunityId</field>
            <value>
                <elementReference>OpportunityId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Role</field>
            <value>
                <stringValue>Distributor</stringValue>
            </value>
        </inputAssignments>
        <object>Partner</object>
    </recordCreates>
    <recordCreates>
        <name>Add_MSP_Bill_Agg</name>
        <label>Add MSP Bill Agg</label>
        <locationX>1079</locationX>
        <locationY>91</locationY>
        <assignRecordIdToReference>MSPBillAggPartnerId</assignRecordIdToReference>
        <inputAssignments>
            <field>AccountToId</field>
            <value>
                <elementReference>MSPBillingAggregatorId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OpportunityId</field>
            <value>
                <elementReference>OpportunityId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Role</field>
            <value>
                <stringValue>MSP Billing Aggregator</stringValue>
            </value>
        </inputAssignments>
        <object>Partner</object>
    </recordCreates>
    <recordCreates>
        <name>Add_Reseller_Partner</name>
        <label>Add Reseller Partner</label>
        <locationX>817</locationX>
        <locationY>169</locationY>
        <assignRecordIdToReference>ResellerPartnerId</assignRecordIdToReference>
        <connector>
            <targetReference>Check_MSP_Bill_Agg_Id</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountToId</field>
            <value>
                <elementReference>ResellerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OpportunityId</field>
            <value>
                <elementReference>OpportunityId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Role</field>
            <value>
                <stringValue>VAR/Reseller</stringValue>
            </value>
        </inputAssignments>
        <object>Partner</object>
    </recordCreates>
    <recordLookups>
        <name>Check_Distributor_Type</name>
        <label>Check Distributor Type</label>
        <locationX>81</locationX>
        <locationY>231</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Related_Partners</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>DistributorId</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputAssignments>
            <assignToReference>AccountType</assignToReference>
            <field>Type</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Check_Related_MSP_Bill_Agg</name>
        <label>Check Related MSP Bill Agg</label>
        <locationX>944</locationX>
        <locationY>374</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Partner_MSP_Bill_Agg_Exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountToId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>MSPBillingAggregatorId</elementReference>
            </value>
        </filters>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>OpportunityId</elementReference>
            </value>
        </filters>
        <object>OpportunityPartner</object>
        <outputReference>MSPBillAgg</outputReference>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Check_Related_Partners</name>
        <label>Check Related Partners</label>
        <locationX>81</locationX>
        <locationY>380</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Partner_Distributor_Exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountToId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>DistributorId</elementReference>
            </value>
        </filters>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>OpportunityId</elementReference>
            </value>
        </filters>
        <object>OpportunityPartner</object>
        <outputReference>PartnerDistributor</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>IsPrimary</queriedFields>
        <queriedFields>Role</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Check_Related_Partners_0</name>
        <label>Check Related Partners</label>
        <locationX>660</locationX>
        <locationY>103</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Partner_Reseller_Exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountToId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ResellerId</elementReference>
            </value>
        </filters>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>OpportunityId</elementReference>
            </value>
        </filters>
        <object>OpportunityPartner</object>
        <outputReference>PartnerReseller</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>IsPrimary</queriedFields>
        <queriedFields>Role</queriedFields>
    </recordLookups>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Check_DistributorId</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>AccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AccountType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>DistributorId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>DistributorPartnerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>MSPBillAgg</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityPartner</objectType>
    </variables>
    <variables>
        <name>MSPBillAggPartnerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>MSPBillingAggregatorId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>OpportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>PartnerDistributor</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OpportunityPartner</objectType>
    </variables>
    <variables>
        <name>PartnerReseller</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityPartner</objectType>
    </variables>
    <variables>
        <name>ResellerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>ResellerPartnerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
