<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Amendment upsell downsell actions</description>
        <name>Amendment_Upsell_Downsell</name>
        <label>Amendment Upsell Downsell</label>
        <locationX>1629</locationX>
        <locationY>759</locationY>
        <actionName>CPQ_QLUpdateAmendment</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>quoteIdList</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CPQ_QLUpdateAmendment</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <description>Actions related to renewal upsell downsell</description>
        <name>Renewal_Upsell_Downsell</name>
        <label>Renewal Upsell Downsell</label>
        <locationX>1633</locationX>
        <locationY>903</locationY>
        <actionName>CPQ_QLUpdateRenewal</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>quoteIdList</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CPQ_QLUpdateRenewal</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>51.0</apiVersion>
    <assignments>
        <name>Assign_Serial</name>
        <label>Assign Serial</label>
        <locationX>463</locationX>
        <locationY>571</locationY>
        <assignmentItems>
            <assignToReference>Serial</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Migration_Upgrade_Serial_s__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Migration_Upgrade_Serial</targetReference>
        </connector>
    </assignments>
    <constants>
        <name>CONSTANT_CANCELLATION</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Cancellation</stringValue>
        </value>
    </constants>
    <constants>
        <name>CONSTANT_CORE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Core</stringValue>
        </value>
    </constants>
    <constants>
        <name>CONSTANT_DOWNGRADE</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Downgrade</stringValue>
        </value>
    </constants>
    <constants>
        <name>CONSTANT_MSP</name>
        <dataType>String</dataType>
        <value>
            <stringValue>MSP</stringValue>
        </value>
    </constants>
    <constants>
        <name>CONSTANT_ZERO</name>
        <dataType>Number</dataType>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </constants>
    <decisions>
        <name>Check_Business_Group</name>
        <label>Check Business Group</label>
        <locationX>902</locationX>
        <locationY>531</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>MSP</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Business_Group__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>CONSTANT_MSP</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Primary_Quote_Cancelled</targetReference>
            </connector>
            <label>MSP</label>
        </rules>
        <rules>
            <name>Core</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Business_Group__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>CONSTANT_CORE</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_Primary_Flag_Changed_to_True</targetReference>
            </connector>
            <label>Core</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Migration_Upgrade_Serial</name>
        <label>Check Migration/Upgrade Serial</label>
        <locationX>577</locationX>
        <locationY>580</locationY>
        <defaultConnector>
            <targetReference>Check_Business_Group</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_Migration_Upgrade_Serial_Not_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Serial</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Serial</targetReference>
            </connector>
            <label>Check Migration/Upgrade Serial Not Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_MSP_Net_Amount_value</name>
        <label>Check MSP Net Amount value</label>
        <locationX>1279</locationX>
        <locationY>664</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>MSP_Net_Amount_value</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MSP_Net_Full_Amount__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_ACV_Value_on_Opportunity</targetReference>
            </connector>
            <label>MSP Net Amount value</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if the quote is for uplevel downlevel renewal</description>
        <name>Decision_Renewal_Uplevel_Downlevel</name>
        <label>Renewal Uplevel Downlevel</label>
        <locationX>1384</locationX>
        <locationY>828</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Renewal_Upsell_Downsell</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Uplevel_Downlevel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Renewal</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Business_Group__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Core</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Renewal_Upsell_Downsell</targetReference>
            </connector>
            <label>Renewal Upsell Downsell</label>
        </rules>
        <rules>
            <name>Yes_Amendment_Upsell_Downsell</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Uplevel_Downlevel__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Amendment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Business_Group__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Core</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Amendment_Upsell_Downsell</targetReference>
            </connector>
            <label>Amendment Upsell Downsell</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_MSP_Net_Amount_is_empty</name>
        <label>Is MSP Net Amount is empty</label>
        <locationX>1267</locationX>
        <locationY>313</locationY>
        <defaultConnector>
            <targetReference>Update_Opportunity_Type_to_Cancellation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>MSP_Net_Amount_is_not_empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MSP_Net_Full_Amount__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_the_ACV_field_and_type_to_Cancellation</targetReference>
            </connector>
            <label>MSP Net Amount is not empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_MSP_Net_Amount_is_NULL</name>
        <label>Is MSP Net Amount is NULL</label>
        <locationX>1282</locationX>
        <locationY>491</locationY>
        <defaultConnector>
            <targetReference>Update_Opportunity_Type_Downgrade</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>MSP_Net_Amount_is_not_NULL</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.MSP_Net_Full_Amount__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_ACV_and_Type_to_Downgrade</targetReference>
            </connector>
            <label>MSP Net Amount is not NULL</label>
        </rules>
    </decisions>
    <decisions>
        <description>SFDC-XXXX: Multiple Reseller - Sync Back</description>
        <name>Is_Primary_Flag_Changed_to_True</name>
        <label>Is Primary Flag Changed to True</label>
        <locationX>1014</locationX>
        <locationY>841</locationY>
        <defaultConnector>
            <targetReference>Decision_Renewal_Uplevel_Downlevel</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Primary_Flag_changed_to_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__Primary__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__Primary__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_Reseller_on_Opportunity</targetReference>
            </connector>
            <label>Yes Primary Flag changed to True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Primary_Quote_Cancelled</name>
        <label>Primary Quote Cancelled</label>
        <locationX>1072</locationX>
        <locationY>314</locationY>
        <defaultConnector>
            <targetReference>Primary_Quote_Downgrade</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Quote_Cancelled</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__Primary__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__LineItemCount__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>CONSTANT_ZERO</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__LineItemCount__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Record.Num_of_Cancellations__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_MSP_Net_Amount_is_empty</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Primary_Quote_Downgrade</name>
        <label>Primary Quote Downgrade?</label>
        <locationX>1069</locationX>
        <locationY>516</locationY>
        <defaultConnector>
            <targetReference>Check_MSP_Net_Amount_value</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Downgrade</name>
            <conditionLogic>(1 AND 2 AND 5) OR (1 AND 3 AND 4 AND 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__LineItemCount__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>CONSTANT_ZERO</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Num_of_Downgrades__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>CONSTANT_ZERO</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.MSP_Net_Full_Amount__c</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>CONSTANT_ZERO</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Num_of_Cancellations__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>CONSTANT_ZERO</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__Opportunity2__r.StageName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_MSP_Net_Amount_is_NULL</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>Logic executed after the quote is created
//SFDC-9376
//SFDC-XXXX : Multiple Reseller : Sync Back
//SFDC-19036 : 
Added an extra condition to exclude quotes whose parent opportunity&apos;s stageName != &apos;Closed Won&apos;.
This extra condition has been added to  decision node, &quot;Primary Quote Downgraded?&quot;.
//SFDC-20203: Sync Shipping Contact back to Opp

SFDC-20095: Updated the logic for MSP Opportunities to check the MSP Net Full Amount and update the ACV field of the parent Opportunity accordingly.</description>
    <environments>Default</environments>
    <formulas>
        <name>Distributor</name>
        <dataType>String</dataType>
        <expression>IF(AND(NOT(ISBLANK({!$Record.SBQQ__Opportunity2__c})),
{!$Record.SBQQ__Opportunity2__r.Distributor__c} &lt;&gt; {!$Record.SBQQ__Distributor__c}),
{!$Record.SBQQ__Distributor__c},
{!$Record.SBQQ__Opportunity2__r.Distributor__c})</expression>
    </formulas>
    <formulas>
        <description>SFDC-18148</description>
        <name>Formula_Reseller_Contact</name>
        <dataType>String</dataType>
        <expression>IF(AND(NOT(ISBLANK({!$Record.SBQQ__Opportunity2__c})),
{!$Record.SBQQ__Opportunity2__r.Reseller_Contact__c} &lt;&gt; {!$Record.SBCF_Reseller_Contact__c}),
{!$Record.SBCF_Reseller_Contact__c},
{!$Record.SBQQ__Opportunity2__r.Reseller_Contact__c})</expression>
    </formulas>
    <formulas>
        <name>Reseller</name>
        <dataType>String</dataType>
        <expression>IF(AND(NOT(ISBLANK({!$Record.SBQQ__Opportunity2__c})),
{!$Record.SBQQ__Opportunity2__r.Reseller__c} &lt;&gt;{!$Record.SBCF_Reseller__c}),
{!$Record.SBCF_Reseller__c},
{!$Record.SBQQ__Opportunity2__r.Reseller__c})</expression>
    </formulas>
    <interviewLabel>Quote After Save Operations {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Quote After Save Operations</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Opportunity</name>
        <label>Get Opportunity</label>
        <locationX>347</locationX>
        <locationY>570</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Serial</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__PrimaryQuote__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </filters>
        <filters>
            <field>SBQQ__PrimaryQuote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_ACV_and_Type_to_Downgrade</name>
        <label>Update ACV and Type to Downgrade</label>
        <locationX>1669</locationX>
        <locationY>406</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__PrimaryQuote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>SBCF_Annual_Contract_Value2__c</field>
            <value>
                <elementReference>$Record.MSP_Net_Full_Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>CONSTANT_DOWNGRADE</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_ACV_Value_on_Opportunity</name>
        <label>Update ACV Value on Opportunity</label>
        <locationX>1555</locationX>
        <locationY>643</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__PrimaryQuote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>SBCF_Annual_Contract_Value2__c</field>
            <value>
                <elementReference>$Record.MSP_Net_Full_Amount__c</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Type_Downgrade</name>
        <label>Update Opportunity Type Downgrade</label>
        <locationX>1674</locationX>
        <locationY>540</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__PrimaryQuote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>CONSTANT_DOWNGRADE</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Type_to_Cancellation</name>
        <label>Update Opportunity Type to Cancellation</label>
        <locationX>1485</locationX>
        <locationY>309</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__PrimaryQuote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>CONSTANT_CANCELLATION</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <description>SFDC-XXX : Multiple Reseller: Sync Back</description>
        <name>update_Reseller_on_Opportunity</name>
        <label>update Reseller on Opportunity</label>
        <locationX>1352</locationX>
        <locationY>987</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SBQQ__Opportunity2__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Billing_Address__c</field>
            <value>
                <elementReference>$Record.Billing_Address__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>City__c</field>
            <value>
                <elementReference>$Record.SBQQ__BillingCity__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Country_ISO_Code__c</field>
            <value>
                <elementReference>$Record.Billing_Country_ISO_Code__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Country__c</field>
            <value>
                <elementReference>$Record.SBQQ__BillingCountry__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deal_Reg_Exp_Date__c</field>
            <value>
                <elementReference>$Record.SBCF_Deal_Reg_Expiration__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deal_Reg_Status__c</field>
            <value>
                <elementReference>$Record.SBCF_Deal_Reg_Status__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deal_Reg_Tracking_No__c</field>
            <value>
                <elementReference>$Record.SBCF_Deal_Reg_Tracking_No__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deal_Reg_Type__c</field>
            <value>
                <elementReference>$Record.SBCF_Deal_Reg_Type2__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Distributor_Contact__c</field>
            <value>
                <elementReference>$Record.SBCF_Distributor_Contact__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Distributor__c</field>
            <value>
                <elementReference>Distributor</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Reseller_Contact__c</field>
            <value>
                <elementReference>$Record.SBCF_Reseller_Contact__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Reseller__c</field>
            <value>
                <elementReference>Reseller</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ship_To_City__c</field>
            <value>
                <elementReference>$Record.SBQQ__ShippingCity__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ship_To_Country__c</field>
            <value>
                <elementReference>$Record.SBQQ__ShippingCountry__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ship_To_State__c</field>
            <value>
                <elementReference>$Record.SBQQ__ShippingState__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ship_To_Street__c</field>
            <value>
                <elementReference>$Record.SBQQ__ShippingStreet__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ship_To_Zip_Postal_Code__c</field>
            <value>
                <elementReference>$Record.SBQQ__ShippingPostalCode__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipping_Address__c</field>
            <value>
                <elementReference>$Record.Shipping_Address__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipping_Contact__c</field>
            <value>
                <elementReference>$Record.Shipping_Contact__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipping_Country_ISO_Code__c</field>
            <value>
                <elementReference>$Record.Shipping_Country_ISO_Code__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>State__c</field>
            <value>
                <elementReference>$Record.SBQQ__BillingState__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Street__c</field>
            <value>
                <elementReference>$Record.SBQQ__BillingStreet__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Zip_Postal_Code__c</field>
            <value>
                <elementReference>$Record.SBQQ__BillingPostalCode__c</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Serial</name>
        <label>Update Serial</label>
        <locationX>703</locationX>
        <locationY>390</locationY>
        <connector>
            <targetReference>Check_Business_Group</targetReference>
        </connector>
        <inputAssignments>
            <field>Migration_Upgrade_Serials__c</field>
            <value>
                <elementReference>Serial</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record.SBQQ__PrimaryOpportunities__r</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Update Annual Contract Value of the parent Opportunity as below.
Annual Contract Value = MSP_Net_Full_Amount__c</description>
        <name>Update_the_ACV_field_and_type_to_Cancellation</name>
        <label>Update the ACV field and type to Cancellation</label>
        <locationX>1277</locationX>
        <locationY>50</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__PrimaryQuote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>SBCF_Annual_Contract_Value2__c</field>
            <value>
                <elementReference>$Record.MSP_Net_Full_Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>CONSTANT_CANCELLATION</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <start>
        <locationX>323</locationX>
        <locationY>229</locationY>
        <connector>
            <targetReference>Get_Opportunity</targetReference>
        </connector>
        <object>SBQQ__Quote__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>Serial</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
